<?xml version="1.0" encoding="ISO-8859-1" ?>
<pipe:pipeline xmlns:pipe="http://cancerresearchuk.org/pipeline/1.2"
               xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
               xsi:schemaLocation="http://cancerresearchuk.org/pipeline/1.2 http://uk-cri-lsol03:8080/solexa/solexa01/schema/workflow/pipeline-1.2.xsd">

    <name>ChipBamProcess Pipeline_P1</name>
    <description>Pipeline for generating Bam files processed for the ChIPseqPipeline.</description>

    <tasks>

	<specialisationSet name="MotifCaller" type="MotifCaller" variable="trio">

	<subtasks> 
       
	 <task name="GetSeqProcess" type="GetSeqProcess">
        <resources>
            <memory>4G</memory>
        </resources>
            <inputs>
                <input name="PeakFile">${PeakFileLocation}</input>
                <input name="Fasta" >${FastaLocation}</input>
            </inputs>

            <outputs>
                <output name="OutFile"  deleteOnFailure="false">${WorkingDirectory}/Motif/${Test}/SeqUnderPeaks.fa</output>		
            </outputs>
	<arguments>
    	    <arg name="TheDirectory">${WorkingDirectory}</arg>
    	    <arg name="Test">${Test}</arg>  
    	</arguments> 
         </task>



	 <task name="AmeProcess" type="AmeProcess">
   	<depends>
	     <task>GetSeqProcess</task>
   	</depends>             
        
        <resources>
            <memory>8G</memory>
        </resources>
            <inputs>
                <input name="Sequences">${WorkingDirectory}/Motif/${Test}/SeqUnderPeaks.fa</input>
                <input name="MotifDatabase">${MotifDatabaseLocation}</input>                
            </inputs>

            <outputs>
                <output name="Ame_Res"  deleteOnFailure="false">${WorkingDirectory}/Motif/${Test}/ame.txt</output>
            </outputs>
	<arguments>
    	    <arg name="TheDirectory">${WorkingDirectory}</arg>
    	    <arg name="Test">${Test}</arg>    	    
    	</arguments> 
         </task>


	     </subtasks>
      </specialisationSet>


    </tasks>
</pipe:pipeline>

